"use strict";(()=>{var a={};a.id=119,a.ids=[119],a.modules={5600:a=>{a.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},6472:a=>{a.exports=require("@opentelemetry/api")},9941:(a,b,c)=>{c.r(b),c.d(b,{config:()=>o,default:()=>n,handler:()=>q});var d={};c.r(d),c.d(d,{default:()=>k,runtime:()=>i});var e=c(9046),f=c(8667),g=c(3480),h=c(6435);let i="nodejs";async function j(a){return await Promise.all([{id:"gpt-4o-analyst",name:"GPT-4o 분석가",temperature:.3,specialty:"논리적 분석"},{id:"gpt-4o-creative",name:"GPT-4o 창작가",temperature:.8,specialty:"창의적 사고"},{id:"gpt-4o-practical",name:"GPT-4o 실무가",temperature:.5,specialty:"실용적 해결"},{id:"gpt-4o-critic",name:"GPT-4o 비평가",temperature:.4,specialty:"비판적 검토"}].map(async b=>{let c=Date.now(),d="",e=null;try{let c=a;switch(b.id){case"gpt-4o-analyst":c=`다음 질문을 논리적이고 체계적으로 분석해주세요:

${a}`;break;case"gpt-4o-creative":c=`다음 질문에 대해 창의적이고 혁신적인 관점에서 답변해주세요:

${a}`;break;case"gpt-4o-practical":c=`다음 질문에 대해 실용적이고 실행 가능한 해결책을 제시해주세요:

${a}`;break;case"gpt-4o-critic":c=`다음 질문에 대해 비판적 사고를 바탕으로 다각도로 검토해주세요:

${a}`}let e=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{Authorization:`Bearer ${process.env.OPENAI_API_KEY}`,"Content-Type":"application/json"},body:JSON.stringify({model:"gpt-4o",messages:[{role:"user",content:c}],max_tokens:800,temperature:b.temperature})});if(!e.ok)throw Error(`API error: ${e.status}`);let f=await e.json();d=f?.choices?.[0]?.message?.content||""}catch(a){e=a,d=`[${b.name} 오류: ${a instanceof Error?a.message:"Unknown error"}]`}let f=Date.now()-c;return{modelId:b.id,content:d||"[응답 없음]",score:e?0:.3*Math.random()+.7,processingTime:f,confidence:e?0:.2*Math.random()+.8,strengths:[b.specialty],concerns:e?["API 호출 실패"]:[],metadata:{tokenCount:Math.floor((d?.length||0)/4),cost:.001}}}))}async function k(a,b){if(b.setHeader("Access-Control-Allow-Origin","*"),b.setHeader("Access-Control-Allow-Methods","GET, POST, OPTIONS"),b.setHeader("Access-Control-Allow-Headers","Content-Type"),"OPTIONS"===a.method)return b.status(200).end();if("POST"!==a.method)return b.status(405).json({error:"Method not allowed"});try{let{query:c,mode:d="parallel",useAdvanced:e=!1}=a.body;if(!c||"string"!=typeof c)return b.status(400).json({error:"Query is required"});if(c.length<10||c.length>2e3)return b.status(400).json({error:"Query must be between 10 and 2000 characters"});console.log(`🚀 Synapse Simple 요청: ${c.substring(0,100)}...`);let f=await j(c),g=f.filter(a=>a.score>0);if(0===g.length)return b.status(500).json({error:"All AI models failed to respond",details:f.map(a=>({modelId:a.modelId,error:a.concerns}))});let h=g.reduce((a,b)=>b.score>a.score?b:a),i={query:c,mode:d,timestamp:new Date().toISOString(),totalModels:f.length,successfulModels:g.length,bestResponse:h,allResponses:f,summary:{averageScore:g.reduce((a,b)=>a+b.score,0)/g.length,totalProcessingTime:f.reduce((a,b)=>a+b.processingTime,0),consensus:g.length>=2?"High":"Low"}};console.log(`✅ Synapse Simple 완료: ${g.length}/${f.length} 모델 성공`),b.status(200).json({success:!0,data:i})}catch(a){console.error("❌ Synapse Simple API 오류:",a),b.status(500).json({success:!1,error:"Internal server error",message:a instanceof Error?a.message:"Unknown error"})}}var l=c(8112),m=c(8766);let n=(0,h.M)(d,"default"),o=(0,h.M)(d,"config"),p=new g.PagesAPIRouteModule({definition:{kind:f.A.PAGES_API,page:"/api/synapse-simple",pathname:"/api/synapse-simple",bundlePath:"",filename:""},userland:d,distDir:".next",relativeProjectDir:""});async function q(a,b,c){let d=await p.prepare(a,b,{srcPage:"/api/synapse-simple"});if(!d){b.statusCode=400,b.end("Bad Request"),null==c.waitUntil||c.waitUntil.call(c,Promise.resolve());return}let{query:f,params:g,prerenderManifest:h,routerServerContext:i}=d;try{let c=a.method||"GET",d=(0,l.getTracer)(),e=d.getActiveScopeSpan(),j=p.instrumentationOnRequestError.bind(p),k=async e=>p.render(a,b,{query:{...f,...g},params:g,allowedRevalidateHeaderKeys:[],multiZoneDraftMode:!1,trustHostHeader:!1,previewProps:h.preview,propagateError:!1,dev:p.isDev,page:"/api/synapse-simple",internalRevalidate:null==i?void 0:i.revalidate,onError:(...b)=>j(a,...b)}).finally(()=>{if(!e)return;e.setAttributes({"http.status_code":b.statusCode,"next.rsc":!1});let f=d.getRootSpanAttributes();if(!f)return;if(f.get("next.span_type")!==m.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${f.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let g=f.get("next.route");if(g){let a=`${c} ${g}`;e.setAttributes({"next.route":g,"http.route":g,"next.span_name":a}),e.updateName(a)}else e.updateName(`${c} ${a.url}`)});e?await k(e):await d.withPropagatedContext(a.headers,()=>d.trace(m.BaseServerSpan.handleRequest,{spanName:`${c} ${a.url}`,kind:l.SpanKind.SERVER,attributes:{"http.method":c,"http.target":a.url}},k))}catch(a){if(p.isDev)throw a;(0,e.sendError)(b,500,"Internal Server Error")}finally{null==c.waitUntil||c.waitUntil.call(c,Promise.resolve())}}}};var b=require("../../webpack-api-runtime.js");b.C(a);var c=b.X(0,[169],()=>b(b.s=9941));module.exports=c})();